- Running autoindexing scripts in the background

There are now a few scripts you can run as a commandline to autoindex,
integrate and generate strategy for a set of two images. Webice runs
these scripts in the background and periodically checks the status
of the run using the control file. This means you can run the script
manually and webice will be able to monitor it.



- Aborting autoindexing

Since the scripts are now running in the background, webice can
abort the job by running another script that kills the process
listed in the control file.



- Viewing result in stages before run finishes

Webice looks at the log messages written by the script to determine
if the autoindex result is available for viewing before the whole run
finishes. Currently I only separate the run into two steps: autoindex+integrate+strategy
and generating prediction jpeg images. The latter step takes quite a while.
You will see a message saying that the autoindex result is now available for viewing
whilst seeing that the run is still in progress (with the blinking icon).


Currently I update the setup page every 4 seconds to get the latest run status
while autoindexing is running. We can make the interval smaller
for those who are impatient.



- Integrate all option is now available

It will integrate all solutions in the labelit table. The integrated solutions are
then added to the mosflm table. I don't know where to get the Beam x, Beam y, Distance,
Resolution, Mosaicity and RMS from and therefore put 0 in all columns. Also don't know
whether to put a smiley or sad face for them!



- Lazy (but efficient) loading of autoindex runs

Webice does not load all runs at start up. It will load each run as you
select it the first time. This is to save memory in case you have created
many runs and only want to see a few of them. You will notice that the
first time you select a run it will take a bit longer to respond.



- Mosflm prediction JPEG

In addition to the two types of predictions we used to have, now
we also have mosflm prediction image generated by labelit.overlay_mosflm
script.



- Input file is now called input.xml and not autoindex.xml

Webice now load input.xml instead of autoindex.xml. Notice changes
format. When you try to load the old projects, webice will automatically
transfer data from autoindex.xml to input.xml for you.



- Configuration data

Data are now divided into groups and are displayed in different tables.
You should now be able to save them.



- Use Global Image Directory

I might have mentioned this feature to you already in the previous email.
In the General table in the Preference tab, you can setup a
"Global Image Directory" config. Then in the Image Viewer and
Autoindex tables, you can set the "Use Global Image Directory"
config to true or false. This will allow you to coordinate the
directory between the Image Viewer and the Autoindex Viewer.



- Session expires problem

When try to click on something in webice while the session is expires
or server has been restarted, webice will display an error page in the
frame in which the click took place. On the error page the user can then
click a button to relogin. The login page will be displayed in the main
frame and the subsequent frames after the login will be displayed correctly.



- Bug: image header is not loaded when loading a new image file
  using input text box located under the image.

It's now fixed.



- Cosmetic changes in the image viewer

To make it look more similar on different platforms and web browsers,
I made some changes to the image frame. Buttons are now image button
instead of HTML button tags to avoid font problems.


- Summary/Statistics for all runs

Number of total spots, bragg spots, ice rings, resolutions,
and bravais choice are displayed in the Runs summary table.
To display this table, click the "Runs" node on the navigation
tree in the left panel.


- Image resolution in Image Viewer

NOT DONE.
The goal is to display the resolution as the mouse moves
around over the image. I spent sometime working on this and got it
to work in IE but I have lots of trouble figuring out how to capture
the mouse event in netscape. Decided not to put it in for now unless
you think it's still useful even if it only works on IE.


- Integrate Other Solutions

In the Autoindex Setup tab, there is now step 3 for integrating
other solutions. Step three becomes available if the run option
is "Integrate Best Solution only" and the autoindexing is finished.
User can select the rest of the autoindex solutions from the list
to integrate and generate strategy.


- Integration result table moved

Integration result table is moved to "Solutions" tab whereas the
Autoindex result table remains in the "Autoindex Summary" tab.

