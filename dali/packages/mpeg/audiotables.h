/*------------------------------------------------------------------------
 *
 * Copyright (c) 1997-1998 by Cornell University.
 * 
 * See the file "license.txt" for information on usage and redistribution
 * of this file, and for a DISCLAIMER OF ALL WARRANTIES.
 *
 *------------------------------------------------------------------------
 */
#define RESERVE -1
#define FREE_BITRATE 0

int layer1_bit_alloc_table[16] =
{
    0, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, ERROR
};

/*
 * sampling_rate_table[i][j] indicates the sampling rate for
 * index i, id j
 */
float sampling_rate_table[4][2] =
{
    {(float) 22.05, (float) 44.1},
    {(float) 24.00, (float) 48.0},
    {(float) 16.00, (float) 32.0},
    {(float) RESERVE, (float) RESERVE}
};

#include "alloctables.h"
#include "filtertable.h"
#include "decodetable.h"

/*
 * bit_rate_table[i][j][k] indicates the bitrate for
 * index i, id j, and layer k+1
 */
float bit_rate_table[16][2][3] =
{
    {
        {FREE_BITRATE, FREE_BITRATE, FREE_BITRATE},
        {FREE_BITRATE, FREE_BITRATE, FREE_BITRATE}},
    {
        {32, 8, 8},
        {32, 32, 32}},
    {
        {48, 16, 16},
        {64, 48, 40}},
    {
        {56, 24, 24},
        {96, 56, 48}},
    {
        {64, 32, 32},
        {128, 64, 56}},
    {
        {80, 40, 40},
        {160, 80, 64}},
    {
        {96, 48, 48},
        {192, 96, 80}},
    {
        {112, 56, 56},
        {224, 112, 96}},
    {
        {128, 64, 64},
        {256, 128, 112}},
    {
        {144, 80, 80},
        {288, 160, 128}},
    {
        {160, 96, 96},
        {320, 192, 160}},
    {
        {176, 112, 112},
        {352, 224, 192}},
    {
        {192, 128, 128},
        {384, 256, 224}},
    {
        {224, 144, 144},
        {416, 320, 256}},
    {
        {256, 160, 160},
        {448, 384, 320}},
    {
        {ERROR, ERROR, ERROR},
        {ERROR, ERROR, ERROR}}
};

double scale_factor_table[64] =
{
    2.00000000000000, 1.58740105196820, 1.25992104989487, 1.00000000000000,
    0.79370052598410, 0.62996052494744, 0.50000000000000, 0.39685026299205,
    0.31498026247372, 0.25000000000000, 0.19842513149602, 0.15749013123686,
    0.12500000000000, 0.09921256574801, 0.07874506561843, 0.06250000000000,
    0.04960628287401, 0.03937253280921, 0.03125000000000, 0.02480314143700,
    0.01968626640461, 0.01562500000000, 0.01240157071850, 0.00984313320230,
    0.00781250000000, 0.00620078535925, 0.00492156660115, 0.00390625000000,
    0.00310039267963, 0.00246078330058, 0.00195312500000, 0.00155019633981,
    0.00123039165029, 0.00097656250000, 0.00077509816991, 0.00061519582514,
    0.00048828125000, 0.00038754908495, 0.00030759791257, 0.00024414062500,
    0.00019377454248, 0.00015379895629, 0.00012207031250, 0.00009688727124,
    0.00007689947814, 0.00006103515625, 0.00004844363562, 0.00003844973907,
    0.00003051757813, 0.00002422181781, 0.00001922486954, 0.00001525878906,
    0.00001211090890, 0.00000961243477, 0.00000762939453, 0.00000605545445,
    0.00000480621738, 0.00000381469727, 0.00000302772723, 0.00000240310869,
    0.00000190734863, 0.00000151386361, 0.00000120155435, 1E-20
};

/*
 * The table below are taken from mpg123 
 * Layer 2 Alloc tables .. 
 * most other tables are calculated on program start (which is (of course)
 * not ISO-conform) .. 
 * Layer-3 huffman table is in huffman.h

 struct al_table alloc_0[] =
 {
 {4, 0},
 {5, 3},
 {3, -3},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {8, -127},
 {9, -255},
 {10, -511},
 {11, -1023},
 {12, -2047},
 {13, -4095},
 {14, -8191},
 {15, -16383},
 {16, -32767},
 {4, 0},
 {5, 3},
 {3, -3},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {8, -127},
 {9, -255},
 {10, -511},
 {11, -1023},
 {12, -2047},
 {13, -4095},
 {14, -8191},
 {15, -16383},
 {16, -32767},
 {4, 0},
 {5, 3},
 {3, -3},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {8, -127},
 {9, -255},
 {10, -511},
 {11, -1023},
 {12, -2047},
 {13, -4095},
 {14, -8191},
 {15, -16383},
 {16, -32767},
 {4, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {8, -127},
 {9, -255},
 {10, -511},
 {11, -1023},
 {12, -2047},
 {13, -4095},
 {16, -32767},
 {4, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {8, -127},
 {9, -255},
 {10, -511},
 {11, -1023},
 {12, -2047},
 {13, -4095},
 {16, -32767},
 {4, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {8, -127},
 {9, -255},
 {10, -511},
 {11, -1023},
 {12, -2047},
 {13, -4095},
 {16, -32767},
 {4, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {8, -127},
 {9, -255},
 {10, -511},
 {11, -1023},
 {12, -2047},
 {13, -4095},
 {16, -32767},
 {4, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {8, -127},
 {9, -255},
 {10, -511},
 {11, -1023},
 {12, -2047},
 {13, -4095},
 {16, -32767},
 {4, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {8, -127},
 {9, -255},
 {10, -511},
 {11, -1023},
 {12, -2047},
 {13, -4095},
 {16, -32767},
 {4, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {8, -127},
 {9, -255},
 {10, -511},
 {11, -1023},
 {12, -2047},
 {13, -4095},
 {16, -32767},
 {4, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {8, -127},
 {9, -255},
 {10, -511},
 {11, -1023},
 {12, -2047},
 {13, -4095},
 {16, -32767},
 {3, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {16, -32767},
 {3, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {16, -32767},
 {3, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {16, -32767},
 {3, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {16, -32767},
 {3, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {16, -32767},
 {3, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {16, -32767},
 {3, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {16, -32767},
 {3, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {16, -32767},
 {3, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {16, -32767},
 {3, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {16, -32767},
 {3, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {16, -32767},
 {3, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {16, -32767},
 {2, 0},
 {5, 3},
 {7, 5},
 {16, -32767},
 {2, 0},
 {5, 3},
 {7, 5},
 {16, -32767},
 {2, 0},
 {5, 3},
 {7, 5},
 {16, -32767},
 {2, 0},
 {5, 3},
 {7, 5},
 {16, -32767}};

 struct al_table alloc_1[] =
 {
 {4, 0},
 {5, 3},
 {3, -3},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {8, -127},
 {9, -255},
 {10, -511},
 {11, -1023},
 {12, -2047},
 {13, -4095},
 {14, -8191},
 {15, -16383},
 {16, -32767},
 {4, 0},
 {5, 3},
 {3, -3},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {8, -127},
 {9, -255},
 {10, -511},
 {11, -1023},
 {12, -2047},
 {13, -4095},
 {14, -8191},
 {15, -16383},
 {16, -32767},
 {4, 0},
 {5, 3},
 {3, -3},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {8, -127},
 {9, -255},
 {10, -511},
 {11, -1023},
 {12, -2047},
 {13, -4095},
 {14, -8191},
 {15, -16383},
 {16, -32767},
 {4, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {8, -127},
 {9, -255},
 {10, -511},
 {11, -1023},
 {12, -2047},
 {13, -4095},
 {16, -32767},
 {4, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {8, -127},
 {9, -255},
 {10, -511},
 {11, -1023},
 {12, -2047},
 {13, -4095},
 {16, -32767},
 {4, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {8, -127},
 {9, -255},
 {10, -511},
 {11, -1023},
 {12, -2047},
 {13, -4095},
 {16, -32767},
 {4, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {8, -127},
 {9, -255},
 {10, -511},
 {11, -1023},
 {12, -2047},
 {13, -4095},
 {16, -32767},
 {4, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {8, -127},
 {9, -255},
 {10, -511},
 {11, -1023},
 {12, -2047},
 {13, -4095},
 {16, -32767},
 {4, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {8, -127},
 {9, -255},
 {10, -511},
 {11, -1023},
 {12, -2047},
 {13, -4095},
 {16, -32767},
 {4, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {8, -127},
 {9, -255},
 {10, -511},
 {11, -1023},
 {12, -2047},
 {13, -4095},
 {16, -32767},
 {4, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {8, -127},
 {9, -255},
 {10, -511},
 {11, -1023},
 {12, -2047},
 {13, -4095},
 {16, -32767},
 {3, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {16, -32767},
 {3, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {16, -32767},
 {3, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {16, -32767},
 {3, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {16, -32767},
 {3, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {16, -32767},
 {3, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {16, -32767},
 {3, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {16, -32767},
 {3, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {16, -32767},
 {3, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {16, -32767},
 {3, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {16, -32767},
 {3, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {16, -32767},
 {3, 0},
 {5, 3},
 {7, 5},
 {3, -3},
 {10, 9},
 {4, -7},
 {5, -15},
 {16, -32767},
 {2, 0},
 {5, 3},
 {7, 5},
 {16, -32767},
 {2, 0},
 {5, 3},
 {7, 5},
 {16, -32767},
 {2, 0},
 {5, 3},
 {7, 5},
 {16, -32767},
 {2, 0},
 {5, 3},
 {7, 5},
 {16, -32767},
 {2, 0},
 {5, 3},
 {7, 5},
 {16, -32767},
 {2, 0},
 {5, 3},
 {7, 5},
 {16, -32767},
 {2, 0},
 {5, 3},
 {7, 5},
 {16, -32767}
 };

 struct al_table alloc_2[] =
 {
 {4, 0},
 {5, 3},
 {7, 5},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {8, -127},
 {9, -255},
 {10, -511},
 {11, -1023},
 {12, -2047},
 {13, -4095},
 {14, -8191},
 {15, -16383},
 {4, 0},
 {5, 3},
 {7, 5},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {8, -127},
 {9, -255},
 {10, -511},
 {11, -1023},
 {12, -2047},
 {13, -4095},
 {14, -8191},
 {15, -16383},
 {3, 0},
 {5, 3},
 {7, 5},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {3, 0},
 {5, 3},
 {7, 5},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {3, 0},
 {5, 3},
 {7, 5},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {3, 0},
 {5, 3},
 {7, 5},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {3, 0},
 {5, 3},
 {7, 5},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {3, 0},
 {5, 3},
 {7, 5},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63}};

 struct al_table alloc_3[] =
 {
 {4, 0},
 {5, 3},
 {7, 5},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {8, -127},
 {9, -255},
 {10, -511},
 {11, -1023},
 {12, -2047},
 {13, -4095},
 {14, -8191},
 {15, -16383},
 {4, 0},
 {5, 3},
 {7, 5},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {8, -127},
 {9, -255},
 {10, -511},
 {11, -1023},
 {12, -2047},
 {13, -4095},
 {14, -8191},
 {15, -16383},
 {3, 0},
 {5, 3},
 {7, 5},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {3, 0},
 {5, 3},
 {7, 5},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {3, 0},
 {5, 3},
 {7, 5},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {3, 0},
 {5, 3},
 {7, 5},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {3, 0},
 {5, 3},
 {7, 5},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {3, 0},
 {5, 3},
 {7, 5},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {3, 0},
 {5, 3},
 {7, 5},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {3, 0},
 {5, 3},
 {7, 5},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {3, 0},
 {5, 3},
 {7, 5},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63},
 {3, 0},
 {5, 3},
 {7, 5},
 {10, 9},
 {4, -7},
 {5, -15},
 {6, -31},
 {7, -63}};
 */
