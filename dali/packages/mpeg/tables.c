/*------------------------------------------------------------------------
 *
 * Copyright (c) 1997-1998 by Cornell University.
 * 
 * See the file "license.txt" for information on usage and redistribution
 * of this file, and for a DISCLAIMER OF ALL WARRANTIES.
 *
 *------------------------------------------------------------------------
 */

#include "tables.h"

/* This caused conflict with bitparser.c when linking.
int bitmask[] =
{
    0x00000000, 0x00000001, 0x00000003, 0x00000007,
    0x0000000f, 0x0000001f, 0x0000003f, 0x0000007f,
    0x000000ff, 0x000001ff, 0x000003ff, 0x000007ff,
    0x00000fff, 0x00001fff, 0x00003fff, 0x00007fff,
    0x0000ffff, 0x0001ffff, 0x0003ffff, 0x0007ffff,
    0x000fffff, 0x001fffff, 0x003fffff, 0x007fffff,
    0x00ffffff, 0x01ffffff, 0x03ffffff, 0x07ffffff,
    0x0fffffff, 0x1fffffff, 0x3fffffff, 0x7fffffff
};
*/

int default_intra_quantizer_table[64] =
{
    8, 16, 19, 22, 26, 27, 29, 34,
    16, 16, 22, 24, 27, 29, 34, 37,
    19, 22, 26, 27, 29, 34, 34, 38,
    22, 22, 26, 27, 29, 34, 37, 40,
    22, 26, 27, 29, 32, 35, 40, 48,
    26, 27, 29, 32, 35, 40, 48, 58,
    26, 27, 29, 34, 38, 46, 56, 69,
    27, 29, 35, 38, 46, 56, 69, 83
};

/* Absolute values from -255 to 255 */
int absTable[512] =
{
    255, 254, 253, 252, 251, 250, 249, 248,
    247, 246, 245, 244, 243, 242, 241, 240,
    239, 238, 237, 236, 235, 234, 233, 232,
    231, 230, 229, 228, 227, 226, 225, 224,
    223, 222, 221, 220, 219, 218, 217, 216,
    215, 214, 213, 212, 211, 210, 209, 208,
    207, 206, 205, 204, 203, 202, 201, 200,
    199, 198, 197, 196, 195, 194, 193, 192,
    191, 190, 189, 188, 187, 186, 185, 184,
    183, 182, 181, 180, 179, 178, 177, 176,
    175, 174, 173, 172, 171, 170, 169, 168,
    167, 166, 165, 164, 163, 162, 161, 160,
    159, 158, 157, 156, 155, 154, 153, 152,
    151, 150, 149, 148, 147, 146, 145, 144,
    143, 142, 141, 140, 139, 138, 137, 136,
    135, 134, 133, 132, 131, 130, 129, 128,
    127, 126, 125, 124, 123, 122, 121, 120,
    119, 118, 117, 116, 115, 114, 113, 112,
    111, 110, 109, 108, 107, 106, 105, 104,
    103, 102, 101, 100, 99, 98, 97, 96,
    95, 94, 93, 92, 91, 90, 89, 88,
    87, 86, 85, 84, 83, 82, 81, 80,
    79, 78, 77, 76, 75, 74, 73, 72,
    71, 70, 69, 68, 67, 66, 65, 64,
    63, 62, 61, 60, 59, 58, 57, 56,
    55, 54, 53, 52, 51, 50, 49, 48,
    47, 46, 45, 44, 43, 42, 41, 40,
    39, 38, 37, 36, 35, 34, 33, 32,
    31, 30, 29, 28, 27, 26, 25, 24,
    23, 22, 21, 20, 19, 18, 17, 16,
    15, 14, 13, 12, 11, 10, 9, 8,
    7, 6, 5, 4, 3, 2, 1,
    0,
    1, 2, 3, 4, 5, 6, 7,
    8, 9, 10, 11, 12, 13, 14, 15,
    16, 17, 18, 19, 20, 21, 22, 23,
    24, 25, 26, 27, 28, 29, 30, 31,
    32, 33, 34, 35, 36, 37, 38, 39,
    40, 41, 42, 43, 44, 45, 46, 47,
    48, 49, 50, 51, 52, 53, 54, 55,
    56, 57, 58, 59, 60, 61, 62, 63,
    64, 65, 66, 67, 68, 69, 70, 71,
    72, 73, 74, 75, 76, 77, 78, 79,
    80, 81, 82, 83, 84, 85, 86, 87,
    88, 89, 90, 91, 92, 93, 94, 95,
    96, 97, 98, 99, 100, 101, 102, 103,
    104, 105, 106, 107, 108, 109, 110, 111,
    112, 113, 114, 115, 116, 117, 118, 119,
    120, 121, 122, 123, 124, 125, 126, 127,
    128, 129, 130, 131, 132, 133, 134, 135,
    136, 137, 138, 139, 140, 141, 142, 143,
    144, 145, 146, 147, 148, 149, 150, 151,
    152, 153, 154, 155, 156, 157, 158, 159,
    160, 161, 162, 163, 164, 165, 166, 167,
    168, 169, 170, 171, 172, 173, 174, 175,
    176, 177, 178, 179, 180, 181, 182, 183,
    184, 185, 186, 187, 188, 189, 190, 191,
    192, 193, 194, 195, 196, 197, 198, 199,
    200, 201, 202, 203, 204, 205, 206, 207,
    208, 209, 210, 211, 212, 213, 214, 215,
    216, 217, 218, 219, 220, 221, 222, 223,
    224, 225, 226, 227, 228, 229, 230, 231,
    232, 233, 234, 235, 236, 237, 238, 239,
    240, 241, 242, 243, 244, 245, 246, 247,
    248, 249, 250, 251, 252, 253, 254, 255};

/* Squares from -255 to 255 */
int squaresTable[512] =
{
    65025, 64516, 64009, 63504, 63001, 62500, 62001, 61504,
    61009, 60516, 60025, 59536, 59049, 58564, 58081, 57600,
    57121, 56644, 56169, 55696, 55225, 54756, 54289, 53824,
    53361, 52900, 52441, 51984, 51529, 51076, 50625, 50176,
    49729, 49284, 48841, 48400, 47961, 47524, 47089, 46656,
    46225, 45796, 45369, 44944, 44521, 44100, 43681, 43264,
    42849, 42436, 42025, 41616, 41209, 40804, 40401, 40000,
    39601, 39204, 38809, 38416, 38025, 37636, 37249, 36864,
    36481, 36100, 35721, 35344, 34969, 34596, 34225, 33856,
    33489, 33124, 32761, 32400, 32041, 31684, 31329, 30976,
    30625, 30276, 29929, 29584, 29241, 28900, 28561, 28224,
    27889, 27556, 27225, 26896, 26569, 26244, 25921, 25600,
    25281, 24964, 24649, 24336, 24025, 23716, 23409, 23104,
    22801, 22500, 22201, 21904, 21609, 21316, 21025, 20736,
    20449, 20164, 19881, 19600, 19321, 19044, 18769, 18496,
    18225, 17956, 17689, 17424, 17161, 16900, 16641, 16384,
    16129, 15876, 15625, 15376, 15129, 14884, 14641, 14400,
    14161, 13924, 13689, 13456, 13225, 12996, 12769, 12544,
    12321, 12100, 11881, 11664, 11449, 11236, 11025, 10816,
    10609, 10404, 10201, 10000, 9801, 9604, 9409, 9216,
    9025, 8836, 8649, 8464, 8281, 8100, 7921, 7744,
    7569, 7396, 7225, 7056, 6889, 6724, 6561, 6400,
    6241, 6084, 5929, 5776, 5625, 5476, 5329, 5184,
    5041, 4900, 4761, 4624, 4489, 4356, 4225, 4096,
    3969, 3844, 3721, 3600, 3481, 3364, 3249, 3136,
    3025, 2916, 2809, 2704, 2601, 2500, 2401, 2304,
    2209, 2116, 2025, 1936, 1849, 1764, 1681, 1600,
    1521, 1444, 1369, 1296, 1225, 1156, 1089, 1024,
    961, 900, 841, 784, 729, 676, 625, 576,
    529, 484, 441, 400, 361, 324, 289, 256,
    225, 196, 169, 144, 121, 100, 81, 64,
    49, 36, 25, 16, 9, 4, 1,
    0,
    1, 4, 9, 16, 25, 36, 49,
    64, 81, 100, 121, 144, 169, 196, 225,
    256, 289, 324, 361, 400, 441, 484, 529,
    576, 625, 676, 729, 784, 841, 900, 961,
    1024, 1089, 1156, 1225, 1296, 1369, 1444, 1521,
    1600, 1681, 1764, 1849, 1936, 2025, 2116, 2209,
    2304, 2401, 2500, 2601, 2704, 2809, 2916, 3025,
    3136, 3249, 3364, 3481, 3600, 3721, 3844, 3969,
    4096, 4225, 4356, 4489, 4624, 4761, 4900, 5041,
    5184, 5329, 5476, 5625, 5776, 5929, 6084, 6241,
    6400, 6561, 6724, 6889, 7056, 7225, 7396, 7569,
    7744, 7921, 8100, 8281, 8464, 8649, 8836, 9025,
    9216, 9409, 9604, 9801, 10000, 10201, 10404, 10609,
    10816, 11025, 11236, 11449, 11664, 11881, 12100, 12321,
    12544, 12769, 12996, 13225, 13456, 13689, 13924, 14161,
    14400, 14641, 14884, 15129, 15376, 15625, 15876, 16129,
    16384, 16641, 16900, 17161, 17424, 17689, 17956, 18225,
    18496, 18769, 19044, 19321, 19600, 19881, 20164, 20449,
    20736, 21025, 21316, 21609, 21904, 22201, 22500, 22801,
    23104, 23409, 23716, 24025, 24336, 24649, 24964, 25281,
    25600, 25921, 26244, 26569, 26896, 27225, 27556, 27889,
    28224, 28561, 28900, 29241, 29584, 29929, 30276, 30625,
    30976, 31329, 31684, 32041, 32400, 32761, 33124, 33489,
    33856, 34225, 34596, 34969, 35344, 35721, 36100, 36481,
    36864, 37249, 37636, 38025, 38416, 38809, 39204, 39601,
    40000, 40401, 40804, 41209, 41616, 42025, 42436, 42849,
    43264, 43681, 44100, 44521, 44944, 45369, 45796, 46225,
    46656, 47089, 47524, 47961, 48400, 48841, 49284, 49729,
    50176, 50625, 51076, 51529, 51984, 52441, 52900, 53361,
    53824, 54289, 54756, 55225, 55696, 56169, 56644, 57121,
    57600, 58081, 58564, 59049, 59536, 60025, 60516, 61009,
    61504, 62001, 62500, 63001, 63504, 64009, 64516, 65025};

/* Huffman encoding tables */
int huff_maxlevel[32] =
{41, 19, 6, 5, 4, 4, 4, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2};

unsigned long huff_table0[41] =
{0x0, 0x6, 0x8, 0xa, 0xc, 0x4c, 0x42, 0x14, 0x3a, 0x30, 0x26, 0x20, 0x34, 0x32, 0x30, 0x2e, 0x3e, 0x3c, 0x3a, 0x38, 0x36, 0x34, 0x32, 0x30, 0x2e, 0x2c, 0x2a, 0x28, 0x26, 0x24, 0x22, 0x20, 0x30, 0x2e, 0x2c, 0x2a, 0x28, 0x26, 0x24, 0x22, 0x20};
int huff_bits0[41] =
{0, 3, 5, 6, 8, 9, 9, 11, 13, 13, 13, 13, 14, 14, 14, 14, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 16, 16, 16, 16, 16, 16, 16, 16, 16};

unsigned long huff_table1[19] =
{0x0, 0x6, 0xc, 0x4a, 0x18, 0x36, 0x2c, 0x2a, 0x3e, 0x3c, 0x3a, 0x38, 0x36, 0x34, 0x32, 0x26, 0x24, 0x22, 0x20};
int huff_bits1[19] =
{0, 4, 7, 9, 11, 13, 14, 14, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17};

unsigned long huff_table2[6] =
{0x0, 0xa, 0x8, 0x16, 0x28, 0x28};
int huff_bits2[6] =
{0, 5, 8, 11, 13, 14};

unsigned long huff_table3[5] =
{0x0, 0xe, 0x48, 0x38, 0x26};
int huff_bits3[5] =
{0, 6, 9, 13, 14};

unsigned long huff_table4[4] =
{0x0, 0xc, 0x1e, 0x24};
int huff_bits4[4] =
{0, 6, 11, 13};

unsigned long huff_table5[4] =
{0x0, 0xe, 0x12, 0x24};
int huff_bits5[4] =
{0, 7, 11, 14};

unsigned long huff_table6[4] =
{0x0, 0xa, 0x3c, 0x28};
int huff_bits6[4] =
{0, 7, 13, 17};

unsigned long huff_table7[3] =
{0x0, 0x8, 0x2a};
int huff_bits7[3] =
{0, 7, 13};

unsigned long huff_table8[3] =
{0x0, 0xe, 0x22};
int huff_bits8[3] =
{0, 8, 13};

unsigned long huff_table9[3] =
{0x0, 0xa, 0x22};
int huff_bits9[3] =
{0, 8, 14};

unsigned long huff_table10[3] =
{0x0, 0x4e, 0x20};
int huff_bits10[3] =
{0, 9, 14};

unsigned long huff_table11[3] =
{0x0, 0x46, 0x34};
int huff_bits11[3] =
{0, 9, 17};

unsigned long huff_table12[3] =
{0x0, 0x44, 0x32};
int huff_bits12[3] =
{0, 9, 17};

unsigned long huff_table13[3] =
{0x0, 0x40, 0x30};
int huff_bits13[3] =
{0, 9, 17};

unsigned long huff_table14[3] =
{0x0, 0x1c, 0x2e};
int huff_bits14[3] =
{0, 11, 17};

unsigned long huff_table15[3] =
{0x0, 0x1a, 0x2c};
int huff_bits15[3] =
{0, 11, 17};

unsigned long huff_table16[3] =
{0x0, 0x10, 0x2a};
int huff_bits16[3] =
{0, 11, 17};

unsigned long huff_table17[2] =
{0x0, 0x3e};
int huff_bits17[2] =
{0, 13};

unsigned long huff_table18[2] =
{0x0, 0x34};
int huff_bits18[2] =
{0, 13};

unsigned long huff_table19[2] =
{0x0, 0x32};
int huff_bits19[2] =
{0, 13};

unsigned long huff_table20[2] =
{0x0, 0x2e};
int huff_bits20[2] =
{0, 13};

unsigned long huff_table21[2] =
{0x0, 0x2c};
int huff_bits21[2] =
{0, 13};

unsigned long huff_table22[2] =
{0x0, 0x3e};
int huff_bits22[2] =
{0, 14};

unsigned long huff_table23[2] =
{0x0, 0x3c};
int huff_bits23[2] =
{0, 14};

unsigned long huff_table24[2] =
{0x0, 0x3a};
int huff_bits24[2] =
{0, 14};

unsigned long huff_table25[2] =
{0x0, 0x38};
int huff_bits25[2] =
{0, 14};

unsigned long huff_table26[2] =
{0x0, 0x36};
int huff_bits26[2] =
{0, 14};

unsigned long huff_table27[2] =
{0x0, 0x3e};
int huff_bits27[2] =
{0, 17};

unsigned long huff_table28[2] =
{0x0, 0x3c};
int huff_bits28[2] =
{0, 17};

unsigned long huff_table29[2] =
{0x0, 0x3a};
int huff_bits29[2] =
{0, 17};

unsigned long huff_table30[2] =
{0x0, 0x38};
int huff_bits30[2] =
{0, 17};

unsigned long huff_table31[2] =
{0x0, 0x36};
int huff_bits31[2] =
{0, 17};

unsigned long *huff_table[32] =
{huff_table0, huff_table1, huff_table2, huff_table3, huff_table4, huff_table5, huff_table6, huff_table7, huff_table8, huff_table9, huff_table10, huff_table11, huff_table12, huff_table13, huff_table14, huff_table15, huff_table16, huff_table17, huff_table18, huff_table19, huff_table20, huff_table21, huff_table22, huff_table23, huff_table24, huff_table25, huff_table26, huff_table27, huff_table28, huff_table29, huff_table30, huff_table31};
int *huff_bits[32] =
{huff_bits0, huff_bits1, huff_bits2, huff_bits3, huff_bits4, huff_bits5, huff_bits6, huff_bits7, huff_bits8, huff_bits9, huff_bits10, huff_bits11, huff_bits12, huff_bits13, huff_bits14, huff_bits15, huff_bits16, huff_bits17, huff_bits18, huff_bits19, huff_bits20, huff_bits21, huff_bits22, huff_bits23, huff_bits24, huff_bits25, huff_bits26, huff_bits27, huff_bits28, huff_bits29, huff_bits30, huff_bits31};
