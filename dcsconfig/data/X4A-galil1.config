##############################
# X4A.config
##############################

# dcss server.
dcss.host=localhost

#serverPorts.txt file fields conversion table
#   1st -->dcss.scriptPort 
#   2nd -->dcss.hardwarePort
#   3rd -->dcss.guiPort
dcss.scriptPort=14244
dcss.hardwarePort=14242
dcss.guiPort=14243
dcss.authProtocol=2

# how often to validate session ids (in msec)
dcss.validationRate=30000

# Location of the dabase memory map file
dcss.dbMapFile=/home/yangx/release-5_1/dcss/dbmapfile/X4A.dat
dcss.certificate=/home/yangx/release-5_1/dcsconfig/data/X4A.crt

# dcss logging: 
# To turn off stdout logging, set logStdout to false
# To turn off udp log, set logUdpHost or logUdpPort to an empty string.
# To turn off log file, set logFilePattern or logFileSize or logFileMax to an empty string
# logLevel can be OFF, SEVERE, WARNING, INFO, CONFIG, FINE, FINER, FINEST OR ALL.
dcss.logStdout=true
dcss.logUdpHost=
dcss.logUdpPort=
dcss.logFilePattern=./X4A_dcss_log_%g_%u.txt
#dcss.logFilePattern=
dcss.logFileSize=31457280
dcss.logFileMax=20
dcss.logLevel=ALL
dcss.logLibs=

# Dumping database.dat to text file. Set dbDumpFlag=false to turn it off.
dcss.dbDumpFlag=false
dcss.dbDumpFile=../../dcsconfig/data/X4A.dump
dcss.dbDumpRate=10000


dcss.forcedDoor=closed

# override the default config in default.config
# authentication server
#auth.host=localhost
#auth.port=8088
#auth.secureHost=localhost
#auth.securePort=8443

auth.host=localhost
auth.port=8080
auth.method=smb_config_database
#auth.method=smb_pam
auth.secureHost=localhost
auth.securePort=8443
#comment following to accept any certificates
auth.trusted_ca_file=/home/yangx/release-5_1/dcsconfig/data/server-jsse.crt

bluice.useSsl=0
bluice.useRobot=1
#bluice.tabOrder=Hutch Sample Collect Scan Users Log Setup 
#bluice.deviceDefinitionFilename=
#bluice.mirrorView=
bluice.hutchView=DCS::HutchOverview
bluice.monoView=DoubleCrystalMonoView
#bluice.toroidView=ToroidView
bluice.beamlineView=goniometer detectorPosition

dcss.display=local localhost:0.0 #Beamline console
dcss.display=local localhost :0.0 #Beamline console

simdetector.name=detector
simdetector.imageDir=/home/yangx/data
simdetector.imageFilter=*.img
## File containing a list of screening result directories
simdetector.cassetteFile=/home/yangx/release-5_1/simdetector/cassette_dirs.txt
simdetector.impHost=localhost
simdetector.impPort=61001


dhs.logStdout=TRUE
dhs.logFileSize=31457280
dhs.logFileMax=10
dhs.logLevel=INFO

epicsgw.name=epics_gateway
#### update rate is ticks; 1 tick is about 0.1 seconds
#### 0 means immediately update up on epics
#epicsgw.default.UpdateRate=0
#class wide rate
epicsgw.String.UpdateRate=10
epicsgw.Motor.UpdateRate=10
#epicsgw.Shutter.UpdateRate=10
# object wide rate
#epicsgw.epics_string1.UpdateRate=0
#epicsgw.epics_motor1.UpdateRate=10
#####string for EPICS array forced read rate per object#####
#epicsgw.epics_string3.ForcedReadRate=10

## quantum 4 detector
#dhs.instance=detector quantum4 /home/yangx/release-5_1/X4/detector_%g_%u.log /home/yangx/release-5_1/X4/detector.dat 500 1000 200
#							IP of detector PC
#quantum4.hostname=10.0.0.2
#quantum4.commandHostname=10.0.0.2
##quantum4.hostname=x4hhmi6.nsls.bnl.gov
##quantum4.commandHostname=x4hhmi6.nsls.bnl.gov
#quantum4.commandPort=8041
#quantum4.dataPort=8042
#quantum4.dataHostnameList=10.0.0.2
#quantum315.dataPortList=8042
#quantum4.beamCenter=94.0 94.0
#quantum4.nonUniformitySlowFile=/home/yangx/release-5_1/ccd_dist/tables_api_418/NONUNF_slow
#quantum4.nonUniformityFastFile=/home/yangx/release-5_1/ccd_dist/tables_api_418/NONUNF_fast
#quantum4.nonUniformitySlowBinFile=/home/yangx/release-5_1/ccd_dist/tables_api_418/NONUNF_2x2
#quantum4.nonUniformityFastBinFile=/home/yangx/release-5_1/ccd_dist/tables_api_418/NONUNF_2x2
#quantum4.distortionSlowFile=/home/yangx/release-5_1/ccd_dist/tables_api_418/CALFIL
#quantum4.distortionFastFile=/home/yangx/release-5_1/ccd_dist/tables_api_418/CALFIL
#quantum4.distortionSlowBinFile=/home/yangx/release-5_1/ccd_dist/tables_api_418/CALFIL_2x2
#quantum4.distortionFastBinFile=/home/yangx/release-5_1/ccd_dist/tables_api_418/CALFIL_2x2
#quantum4.postNonUniformitySlowFile=/home/yangx/release-5_1/ccd_dist/tables_api_418/POSTNUF_slow
#quantum4.postNonUniformityFastFile=/home/yangx/release-5_1/ccd_dist/tables_api_418/POSTNUF_fast
#quantum4.postNonUniformitySlowBinFile=/home/yangx/release-5_1/ccd_dist/tables_api_418/POSTNUF_2x2
#quantum4.postNonUniformityFastBinFile=/home/yangx/release-5_1/ccd_dist/tables_api_418/POSTNUF_2x2
#quantum4.darkDirectory=/home/yangx/release-5_1/ccd_dist/tables_api_418/darkimages
#quantum4.darkRefreshTime=7200
##quantum4.darkExposureTolerance=0.10
#quantum4.writeRawImages=y
#quantum4.serialNumber=418 #simulation serial number

# quantum 315 detector
#dhs.instance=detector quantum315 /home/yangx/release-5_1/X4/detector_%g_%u.log /home/yangx/release-5_1/X4/detector.dat 500 1000 200
#quantum315.commandHostname=koala
#quantum315.commandPort=8041
#quantum315.dataHostnameList=916-0 916-1 916-2 916-3 916-4 916-5 916-6 916-7 916-8
#quantum315.dataPortList=9042 9042 9042 9042 9042 9042 9042 9042 9042
#quantum315.beamCenter=157.5 157.5
#quantum315.darkRefreshTime=7200
#quantum315.darkExposureTolerance=0.10
#quantum315.writeRawImages=n
#quantum315.serialNumber=916


# imperson dhs
impdhs.name=imperson
impdhs.tmpDir=/tmp
impdhs.choochBinDir=/home/yangx/release-5_1/autochooch/bin
impdhs.choochDatDir=/home/yangx/release-5_1/autochooch/data
impdhs.cameraHost=localhost
impdhs.cameraPort=80
impdhs.impHost=localhost
impdhs.impPort=61001


# image server
imgsrv.host=localhost
imgsrv.guiPort=14005
imgsrv.webPort=14006
imgsrv.httpPort=14007
imgsrv.tmpDir=/home/yangx/imgsrv-tmp/jpegscratch
imgsrv.maxIdleTime=60
imgsrv.logStdout=true
imgsrv.logUdpHost=
imgsrv.logUdpPort=
imgsrv.logFilePattern=./imgsrv_log_%d.log
imgsrv.logFileSize=31457280
imgsrv.logFileMax=1
imgsrv.logLevel=ALL
imgsrv.logLibs=

# impersoanation server
imperson.host=localhost
imperson.port=61001
imperson.readonlyHost=localhost
imperson.readonlyPort=61002

attenuation.filterThickness=Al_32 800 Al_16 400 Al_8 200 Al_4 100 Al_2 50 Al_1 25
bluice.filterLabelMap=Al_0.5 Fe Al_1 1 Al_2 2 Al_4 4 Al_8 8 Al_16 16 Al_32 32 Se Se

#For camera server
dhs.instance=camera axis2400 /home/yangx/release-5_1/X4A/camera_%g_%u.log /home/yangx/release-5_1/X4A/camera.dat 500 5000 5000

#axis2400.hostname=bm8axis
#axis2400.hostname=164.54.152.77
axis2400.hostname=130.199.193.14
axis2400.port=80
axis2400.passwordFile=/home/yangx/release-5_1/X4A/axis2400Password.txt

axis2400.url_path=/axis-cgi/jpg/image.cgi?camera=2&clock=0&date=0&text=0 HTTP/1.1\r\n
# video urls
#video1.imageUrl=http://bm8axis.nec.aps.anl.gov/view/indexFrame.shtml
video1.imageUrl=http://130.199.193.14/axis-cgi/jpg/image.cgi?resolution=352x240&camera=1
video2.imageUrl=http://130.199.193.14/axis-cgi/jpg/image.cgi?resolution=352x240&camera=2
video3.imageUrl=http://130.199.193.14/axis-cgi/jpg/image.cgi?resolution=704x576&camera=3
video4.imageUrl=http://130.199.193.14/axis-cgi/jpg/image.cgi?resolution=352x240&camera=4

# for DCSS sampleVideo snapshot
video.snapshotUrl=http://130.199.193.14/axis-cgi/jpg/image.cgi?camera=1

#presets, needs the channel arguments
video1.presetRequestUrl=
video2.presetRequestUrl=http://130.199.193.14/axis-cgi/com/ptz.cgi?query=presetposcam
video3.presetRequestUrl=http://130.199.193.14/axis-cgi/com/ptz.cgi?query=presetposcam
video4.presetRequestUrl=http://130.199.193.14/axis-cgi/com/ptz.cgi?query=presetposcam

#url for requesting a move, needs the channel arguments
video1.moveRequestUrl=
video2.moveRequestUrl=http://130.199.193.14/axis-cgi/com/ptz.cgi
video3.moveRequestUrl=http://130.199.193.14/axis-cgi/com/ptz.cgi
video4.moveRequestUrl=http://130.199.193.14/axis-cgi/com/ptz.cgi

#more arguments
video1.args=&camera=1
video2.args=&camera=2
video3.args=&camera=3
video4.args=&camera=4

#Configuring the DHS to control DMC 2180 Motion Controller (copied from manaul)
#dhs.instance=instanceName hardwareType logFilePattern memoryMapName autoflush watchdog devicepollTime
dhs.instance=galil1 dmc2180 /home/yangx/release-5_1/X4A/galil1_%g_%u.log /home/yangx/release-5_1/X4A/galil1.dat 500 1000 200

#dhs.instance=galil2 dmc2180 /home/yangx/release-5_1/X4A/galil2_%g_%u.log /home/yangx/release-5_1/X4A/galil2.dat 500 1000 200

#dmc2180.control=dhsIstanceName dmc2180hostname scriptname connectbackhostname
dmc2180.control=galil1 x4a-galil-1 /home/yangx/release-5_1/dhs/galil_scripts/script-x4a.txt localhost #bm8-galil-1.nec.aps.anl.gov

#dmc2180.control=galil2 x4a-galil-2 /home/yangx/release-5_1/dhs/galil_scripts/script-x4a.txt localhost #bm8-galil-1.nec.aps.anl.gov

#             =motor_name channel P I D
galil1.stepper =tripot_1 a
galil1.stepper =tripot_2 b
galil1.stepper =tripot_3 c
#galil1.servo  =gonio_omega e 3291 221 32
#galil1.stepper =gonio_omega e
galil1.stepper =gonio_phi e
galil1.stepper =detector_vert f		#detector distance
galil1.stepper =detector_z g
galil1.shutter=shutter 10 closed


#galil2.stepper =slit_1 a
#galil2.stepper =slit_2 b
#galil2.stepper =gonio_kappa c
#galil2.stepper =beamstop_vert g
#galil2.stepper =beamstop_horz h

###############################################
# daqBoard 1000
###############################################
#daqBoard.board0.adc_mode=single_ended
daqBoard.board0.adc_mode=differential
#daqBoard.board0.dioPortA=input
#daqBoard.board0.dioPortB=output
#daqBoard.board0.dioPortCHigh=output
#daqBoard.board0.dioPortCLow=input
#daqBoard.board1.adc_mode=single_ended
#daqBoard.board1.dioPortA=input
#daqBoard.board1.dioPortB=output
#daqBoard.board1.dioPortCHigh=output
#daqBoard.board1.dioPortCLow=input

                  
# the ./dcss X4A -s will have segment fault if the following not commented out these three screening url.
# But somehow impdhs will not work if these are commented out. need to find a solution.
# I guess I need to set up web server for these screening staff.


screening.latestEventIdUrl=https://localhost:8443/crystals-dev/getLatestEventId.do
#screening.defaultSILUrl=https://localhost:8443/crystals-dev/createDefaultSil.do
#screening.uploadSILUrl=https://localhost:8443/crystals-dev/uploadSil.do
#screening.downloadSILUrl=https://localhost:8443/crystals-dev/downloadSil.do
#screening.lockSILUrl=https://localhost:8443/crystals-dev/setSilLock.do
#screening.unassignSILUrl=https://localhost:8443/crystals-dev/unassignSil.do
#screening.moveCrystalUrl=https://localhost:8443/crystals-dev/moveCrystal.do
screening.cassetteDataUrl=https://localhost:8443/crystals-dev/getCassetteData.do
#screening.cassetteInfoUrl=https://localhost:8443/crystals-dev/CassetteInfo.jsp
#screening.crystalDataUrl=https://localhost:8443/crystals-dev/getCrystalData.do
#screening.crystalUpdateUrl=https://localhost:8443/crystals-dev/updateCrystalData.do
#screening.crystalEditUrl=https://localhost:8443/crystals-dev/setCrystal.do
#screening.crystalSetAttributeUrl=https://localhost:8443/crystals-dev/setCrystalAttribute.do
#screening.crystalGetChangesUrl=https://localhost:8443/crystals-dev/getChangesSince.do
#screening.crystalClearImagesUrl=https://localhost:8443/crystals-dev/clearCrystalImages.do
#screening.crystalClearResultsUrl=https://localhost:8443/crystals-dev/clearCrystal.do
#screening.crystalClearAllCrystalsUrl=https://localhost:8443/crystals-dev/clearAllCrystals.do
#screening.crystalAddImageUrl=https://localhost:8443/crystals-dev/addCrystalImage.do
#screening.SILRowDataUrl=https://localhost:8443/crystals-dev/jsp/getRow.jsp
screening.silIdAndEventIdUrl=https://localhost:8443/crystals-dev/getSilIdAndEventId.do

robot.probeScaled=1

#gonio x,y,z move sequencially due to crystal logical x,y,z, are combo motion
sample_move_serial=1
